<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="/resource/app.css" rel="stylesheet">
    <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous"> -->
    <title>Headpat</title>
    <meta property="og:title" content="Headpat" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://headpat.tentti.xyz/" />
    <meta property="og:image" content="/resource/banner.png" />
    <link rel="icon" type="image/x-icon" href="/resource/banner.png">
    <meta property="og:description" content="The 'cool' Discord inspired chat application!" />
    <meta name="theme-color" content="#0d6efd">
</head>
<body>
<%- include("./navbar_in"); %>
<div id="snackbar"></div>
<%- include("./message_ctx"); %>
<%- include("./user_ctx"); %>
<div class="callout callout-danger" id="dangerNotice">
    <button id="closeDanger" type="button" class="btn-close" aria-label="Close"></button>
    Headpat is Work In Progress. Expect glitches, bugs and faults.<br>
    ~ Ten
</div>
<div class="flex-container" id="container">
    <div id="leftContainer">
        <div>
            <div id="serverList">
                <div id="serverContainer">
                    <div class="server active">
                        <img src="/resource/banner.png" width="48" height="48" />
                    </div>
                    <div class="server">
                        <img src="/resource/banner.png" width="48" height="48" />
                    </div>
                </div>
            </div>
            <div id="channelList">
                <div>
                    <div id="serverNameContainer">
                        <span id="serverNameSpan"></span>
                    </div>
                </div>
                <div id="channelsContainer"></div>
                <div class="flex-items exitable" id="user" onclick="openUserPopup(document.headpat.currentUser.ID, this, true)"></div>
            </div>
        </div>
    </div>
    <div id="rightContainer">
        <div id="rightNav">
            <!-- serverChannelListToggle should only show on mobile -->
            <button id="serverChannelListToggle"><</button>
            <div id="rightNavChannelInfo">
                <svg x="0" y="0" class="icon_ae0b42" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M10.99 3.16A1 1 0 1 0 9 2.84L8.15 8H4a1 1 0 0 0 0 2h3.82l-.67 4H3a1 1 0 1 0 0 2h3.82l-.8 4.84a1 1 0 0 0 1.97.32L8.85 16h4.97l-.8 4.84a1 1 0 0 0 1.97.32l.86-5.16H20a1 1 0 1 0 0-2h-3.82l.67-4H21a1 1 0 1 0 0-2h-3.82l.8-4.84a1 1 0 1 0-1.97-.32L15.15 8h-4.97l.8-4.84ZM14.15 14l.67-4H9.85l-.67 4h4.97Z" clip-rule="evenodd" class=""></path></svg>
                <span id="rightNavChannelName"></span>
            </div>
            <div id="rightNavButtons">
                <button id="userListToggle">
                    <svg x="0" y="0" aria-hidden="true" role="img" xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M14.5 8a3 3 0 1 0-2.7-4.3c-.2.4.06.86.44 1.12a5 5 0 0 1 2.14 3.08c.01.06.06.1.12.1ZM18.44 17.27c.15.43.54.73 1 .73h1.06c.83 0 1.5-.67 1.5-1.5a7.5 7.5 0 0 0-6.5-7.43c-.55-.08-.99.38-1.1.92-.06.3-.15.6-.26.87-.23.58-.05 1.3.47 1.63a9.53 9.53 0 0 1 3.83 4.78ZM12.5 9a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM2 20.5a7.5 7.5 0 0 1 15 0c0 .83-.67 1.5-1.5 1.5a.2.2 0 0 1-.2-.16c-.2-.96-.56-1.87-.88-2.54-.1-.23-.42-.15-.42.1v2.1a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-2.1c0-.25-.31-.33-.42-.1-.32.67-.67 1.58-.88 2.54a.2.2 0 0 1-.2.16A1.5 1.5 0 0 1 2 20.5Z" class=""></path>
                    </svg>
                </button>
            </div>
        </div>
        <div id="channelContentContainer">
            <div id="messages">
                <div id="messagesContainer" loaded="false">
                </div>
                <div class="flex-items" id="messageSender">
                    <!-- messageFiledPlaceholder should be placed somewhere after messageField -->
                    <div id="messageField" class="text-input" role="textbox" aria-multiline="true" spellcheck="true" aria-haspopup="listbox" aria-invalid="false" aria-autocomplete="list" contenteditable="true" ondragenter="event.preventDefault(); event.dataTransfer.dropEffect = 'none'" ondragover="event.preventDefault(); event.dataTransfer.dropEffect = 'none'"></div>
                    <!-- mobileSend only shows and only works on mobile -->
                    <div id="mobileSend">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 100 100">
                            <path d="M5.1,90.8l7.6-32.9c0.3-1.4,1.5-2.5,3-2.7l42.5-4.4c1.2-0.1,1.2-1.9,0-2.1l-42.5-4.1c-1.5-0.1-2.7-1.2-3-2.6  L5.1,9.2C4.4,6.4,7.4,4.1,10,5.4l83.1,41.6c2.5,1.3,2.5,4.9,0,6.2L10,94.6C7.4,95.9,4.4,93.6,5.1,90.8z"/>
                        </svg>
                    </div>
                    <div id="messageFieldPlaceholder" class="text-input">Message #</div>
                </div>
            </div>
            <div id="userList">
            </div>
        </div>
    </div>
</div>
<%- include("./user_popup"); %>
<script src="/resource/app.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/linkifyjs@4.1.3/dist/linkify.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/dompurify@2.4.0/dist/purify.min.js"></script>
</body>
</html>
